# unityDemo

---------------------------------- 2022-12-28 ----------------------------------

作品程序框架：

\1.   要实现的功能：

(1)   需要加载的资源：

①   场景；

②   UI资源（prefab、贴图）；

③   模型（prefab）、材质、贴图、动画、asset文件...；

(2)   资源管理：

①   资源的加载、卸载；

(3)   消息机制：

①   消息监听；

②   消息分发；

(4)   交互：

①   界面与逻辑交互（点击某个按钮播放XXX）；

\2.   根据功能设计框架：

(1)   框架内的各个角色：

①   GameMgr：程序流程控制，控制程序启动、暂停、快进、结束，管理其它所有控制器（Mgr）；

②   AssetsMgr：资源控制器，控制1. (1)中所有资源的加载、卸载，实现1.(2)的功能；

③   SceneMgr：场景控制器，控制场景切换，场景内容管理（天空盒、lightMap、改场景相关全局设置等管理）；

④   UIMgr：界面控制器，控制打开关闭界面、界面层级控制；

⑤   MessageMgr：消息管理，负责消息分发、监听；

⑥   CharacterCtrl：角色控制，控制角色移动、播放动作；

⑦   CameraCtrl：摄像机控制，控制摄像机跟随、移动、旋转、缩放、震动；

⑧   以上Mgr结尾的角色均可设置为单例，Ctrl结尾的可选择性的设置为单例，如有其它功能（例如播放Timeline）需求继续考虑是否需要为框架添加角色；

(2)   框架用到的设计模式：

①   单例模式：子类为单例；

②   观察者模式：消息机制实现思路；

\3.   填充框架：

(1)   实现设计模式（2.(1)中角色使用的多的设计模式需要抽象出来，如果只有1个角色用到，不需要抽象、直接实现）；

①   单例模式：实现SingletonMono、Singleton两个基类，其子类均为单例、SingletonMono实现的单例是继承MonoBehaviour的，可以挂在GameObject上；

②   观察者模式：

\1)     MessageMgr.Add(MessageKey,ExcuseMethod,params[])消息注册方法实现；

\2)     MessageMgr.Remove(MessageKey,ExcuseMethod)消息注销方法实现；

\3)     MessageMgr.Excuse(MessageKey,params[])消息触发方法实现；

(2)   实现资源管理（AssetsMgr）：

资源的加载和卸载有多种方式，Addressable优先考虑；

(3)   实现GameMgr等其它各个角色...；

\4.   接入具体逻辑：

(1)   每个界面逻辑、特效播放、动画播放等....；
